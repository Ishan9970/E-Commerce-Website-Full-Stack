<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Processing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 40px;
      min-height: 100vh;
      background: linear-gradient(135deg, #f0fefc, #ccf5eb);
      font-family: Arial, sans-serif;
      margin: 0;
    }
    h2 { color: #15846a; margin-bottom: 20px; font-size: 1.8rem; text-align: center; }
    .payment-options {
      background: #fff;
      padding: 18px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      width: 280px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 25px;
    }
    .payment-options label {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 8px;
      border: 1.8px solid #1ee6c2;
      background-color: #f8fffe;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .payment-options label:hover {
      background-color: #d0f4ed;
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .payment-options input[type="radio"] {
      transform: scale(1.3);
      cursor: pointer;
    }
    #payBtn {
      padding: 12px 28px;
      background: #1ee6c2;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    #payBtn:hover { background-color: #0896d2; transform: scale(1.03); }

    /* Center processing vertically */
    #processing {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #f0fefc, #ccf5eb);
      z-index: 999;
    }
    .loader {
      border: 6px solid #c1f7e9;
      border-top: 6px solid #1ee6c2;
      border-radius: 50%;
      width: 70px; height: 70px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .status-text { font-size: 1.2rem; color: #15846a; font-weight: 600; text-align: center; }
    .checkmark {
      width: 80px; height: 80px;
      background: #15b892;
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      box-shadow: 0px 0px 0px 3px #15b892;
    }
    svg { width: 50px; height: 50px; }
    .done-btn {
      padding: 12px 24px;
      background: #1ee6c2;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
      display: none;
      transition: background-color 0.25s ease, transform 0.2s ease;
    }
    .done-btn:hover { background: #0896d2; transform: scale(1.02); }
  </style>
</head>
<body>

  <h2>Select Payment Method</h2>

  <div class="payment-options">
    <label><input type="radio" name="paymentMethod" value="GooglePay" checked> Google Pay</label>
    <label><input type="radio" name="paymentMethod" value="UPI"> UPI</label>
    <label><input type="radio" name="paymentMethod" value="Card"> Debit/Credit Card</label>
  </div>

  <button id="payBtn">Proceed to Pay</button>

  
  <div id="processing">
    <div class="loader" id="loader"></div>
    <div class="status-text" id="statusText">Processing your payment...</div>
    <div class="checkmark" id="checkmark">
      <svg viewBox="0 0 52 52"><path fill="none" stroke="#fff" stroke-width="5" d="M14 27 l7 7 l16 -16" /></svg>
    </div>
    <button class="done-btn" id="doneBtn" onclick="location.href='welcome.html'">Continue</button>
  </div>

  <script>
    document.getElementById('payBtn').addEventListener('click', async function () {
      const method = document.querySelector('input[name="paymentMethod"]:checked').value;
      const amount = localStorage.getItem('payment_amount');
      const userId = localStorage.getItem('userId');

      if (!userId || !amount) {
        alert("Missing payment details. Please go back to cart.");
        return;
      }

      
      document.querySelector('h2').style.display = 'none';
      document.querySelector('.payment-options').style.display = 'none';
      document.getElementById('payBtn').style.display = 'none';
      document.getElementById('processing').style.display = 'flex';

      try {
        let res = await fetch('/api/pay', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ payment_mode: method, amount: amount, userId: userId })
        });

        if (!res.ok) throw new Error('Network error');

        let data = await res.json();
        if (data.success) {
          
          console.log("Gateway Transaction ID:", data.gateway_transaction_id);

          
          localStorage.removeItem(`user_cart_quantities_${userId}`);

          
          setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('statusText').textContent = 'Payment Successful!';
            document.getElementById('checkmark').style.display = 'flex';
            setTimeout(() => {
              document.getElementById('doneBtn').style.display = 'inline-block';
            }, 800);
          }, 2000);
        } else {
          document.getElementById('statusText').textContent = data.message || 'Payment Failed!';
          document.getElementById('loader').style.display = 'none';
        }
      } catch (err) {
        document.getElementById('statusText').textContent = 'Error connecting to payment server.';
        document.getElementById('loader').style.display = 'none';
        console.error(err);
      }
    });
  </script>

</body>
</html>


so now i have to make my website admin based so now fist in login page  it will ask log in as user and login as admin .when the adin logs in with email and passeord then backend responds with
if the email and password of admin is stored in backend is correct so direct the admin to webiste whith an option to add new item in website and then store items  details in backend